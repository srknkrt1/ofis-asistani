<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Veri Yarƒ±≈üƒ± Olu≈ütur</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    table input, select {
      min-width: 120px;
    }
  </style>
</head>
<body>
<div class="container mt-4">
  <h3 class="text-center">üèÅ Bar Chart Race Olu≈ütur</h3>

  <form action="/viz/render" method="post" enctype="multipart/form-data" id="vizForm">
    <div class="mb-3">
      <label class="form-label">Excel Y√ºkle (Opsiyonel):</label>
      <input class="form-control" type="file" name="excel">
    </div>

    <div class="mb-3">
      <label>Toplam Video S√ºresi (5-20 sn):</label>
      <input class="form-range" type="range" name="duration" min="5" max="20" value="10" oninput="this.nextElementSibling.value = this.value">
      <output>10</output> saniye
    </div>

    <div class="mb-3">
      <label>Logolarƒ± G√∂ster:</label>
      <select name="show_logos" class="form-select">
        <option value="no">Hayƒ±r</option>
        <option value="yes">Evet</option>
      </select>
    </div>

    <div class="table-responsive">
      <table class="table table-bordered" id="dataTable">
        <thead>
        <tr>
          <th><input class="form-control" name="headers[]" value="D√∂nem"></th>
          <th><input class="form-control" name="headers[]" value="Kategori A"></th>
          <th><input class="form-control" name="headers[]" value="Kategori B"></th>
          <th><input class="form-control" name="headers[]" value="Kategori C"></th>
        </tr>
        </thead>
        <tbody id="tableBody">
        <tr>
          <td><input name="row0[]" class="form-control" value="2020"></td>
          <td><input name="row0[]" class="form-control" value="100"></td>
          <td><input name="row0[]" class="form-control" value="80"></td>
          <td><input name="row0[]" class="form-control" value="60"></td>
        </tr>
        <tr>
          <td><input name="row1[]" class="form-control" value="2021"></td>
          <td><input name="row1[]" class="form-control" value="120"></td>
          <td><input name="row1[]" class="form-control" value="95"></td>
          <td><input name="row1[]" class="form-control" value="70"></td>
        </tr>
        </tbody>
      </table>
      <button type="button" class="btn btn-outline-primary btn-sm" onclick="addRow()">Satƒ±r Ekle</button>
      <button type="button" class="btn btn-outline-secondary btn-sm" onclick="addColumn()">S√ºtun Ekle</button>
    </div>

    <div class="mt-4 text-center">
      <button class="btn btn-success" type="submit">Grafiƒüi Olu≈ütur</button>
    </div>
  </form>
</div>

<script>
  function addRow() {
    const tbody = document.getElementById('tableBody');
    const rowCount = tbody.rows.length;
    const colCount = tbody.rows[0].cells.length;
    let row = '<tr>';
    for (let i = 0; i < colCount; i++) {
      row += `<td><input name="row${rowCount}[]" class="form-control"></td>`;
    }
    row += '</tr>';
    tbody.insertAdjacentHTML('beforeend', row);
  }

  function addColumn() {
    const headerRow = document.querySelector('thead tr');
    const newHeader = document.createElement('th');
    newHeader.innerHTML = `<input class="form-control" name="headers[]" value="Yeni Kategori">`;
    headerRow.appendChild(newHeader);

    const rows = document.querySelectorAll('#tableBody tr');
    rows.forEach((tr, rowIndex) => {
      const td = document.createElement('td');
      td.innerHTML = `<input name="row${rowIndex}[]" class="form-control">`;
      tr.appendChild(td);
    });
  }
</script>
</body>
</html>
